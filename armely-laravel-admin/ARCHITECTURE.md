# ğŸ—ï¸ Architecture & Data Flow

## System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Browser/Client                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ Search Modal â”‚  â”‚ Bot Interfaceâ”‚  â”‚ Cookies Bannerâ”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚         â”‚                  â”‚                  â”‚             â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                            â”‚                                â”‚
â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚                   â”‚ search-enhanced.jsâ”‚                     â”‚
â”‚                   â”‚  (Main Controller) â”‚                    â”‚
â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                            â”‚                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   AJAX Request  â”‚
                    â”‚  (GET /api/search)â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Laravel Backend                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚              routes/web.php                      â”‚      â”‚
â”‚  â”‚  â€¢ GET /api/search                               â”‚      â”‚
â”‚  â”‚  â€¢ GET /api/search/suggestions                   â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                        â”‚                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚      SearchController                              â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚   â”‚
â”‚  â”‚  â”‚ search()                                 â”‚     â”‚   â”‚
â”‚  â”‚  â”‚  1. Validate query                       â”‚     â”‚   â”‚
â”‚  â”‚  â”‚  2. Loop through pages                   â”‚     â”‚   â”‚
â”‚  â”‚  â”‚  3. Render views                         â”‚     â”‚   â”‚
â”‚  â”‚  â”‚  4. Search content                       â”‚     â”‚   â”‚
â”‚  â”‚  â”‚  5. Calculate relevance                  â”‚     â”‚   â”‚
â”‚  â”‚  â”‚  6. Return JSON                          â”‚     â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚   â”‚
â”‚  â”‚  â”‚ getSearchablePages()                     â”‚     â”‚   â”‚
â”‚  â”‚  â”‚  â€¢ Returns array of pages                â”‚     â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚   â”‚
â”‚  â”‚  â”‚ getPageContent()                         â”‚     â”‚   â”‚
â”‚  â”‚  â”‚  â€¢ Renders view                          â”‚     â”‚   â”‚
â”‚  â”‚  â”‚  â€¢ Strips HTML                           â”‚     â”‚   â”‚
â”‚  â”‚  â”‚  â€¢ Returns plain text                    â”‚     â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚   â”‚
â”‚  â”‚  â”‚ searchInContent()                        â”‚     â”‚   â”‚
â”‚  â”‚  â”‚  â€¢ Finds query occurrences               â”‚     â”‚   â”‚
â”‚  â”‚  â”‚  â€¢ Extracts snippets                     â”‚     â”‚   â”‚
â”‚  â”‚  â”‚  â€¢ Highlights terms                      â”‚     â”‚   â”‚
â”‚  â”‚  â”‚  â€¢ Calculates position                   â”‚     â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  JSON Response  â”‚
                    â”‚  {success, results}â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Browser/Client                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚   search-enhanced.js                             â”‚      â”‚
â”‚  â”‚   displayResults()                               â”‚      â”‚
â”‚  â”‚    â€¢ Parse JSON                                  â”‚      â”‚
â”‚  â”‚    â€¢ Create HTML elements                        â”‚      â”‚
â”‚  â”‚    â€¢ Inject into DOM                             â”‚      â”‚
â”‚  â”‚    â€¢ Animate results                             â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚   User sees results                              â”‚      â”‚
â”‚  â”‚    â€¢ Highlighted search terms                    â”‚      â”‚
â”‚  â”‚    â€¢ Page location indicators                    â”‚      â”‚
â”‚  â”‚    â€¢ Clickable links                             â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Component Interaction Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Page Loads  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â”€â–º Load search-enhanced.css
       â”‚
       â”œâ”€â”€â–º Load search-enhanced.js
       â”‚
       â”œâ”€â”€â–º Initialize Components:
       â”‚     â”œâ”€â–º Search.init()
       â”‚     â”œâ”€â–º ChatBot.init()
       â”‚     â”œâ”€â–º Banner.init()
       â”‚     â”œâ”€â–º Cookies.init()
       â”‚     â””â”€â–º LazyLoad.init()
       â”‚
       â””â”€â”€â–º Show Bot Popup (after 5s)
              â””â”€â–º User clicks "Chat Now" or "No Thanks"
                   â””â”€â–º Store preference in localStorage

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User Searches â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â”œâ”€â”€â–º Click search icon
        â”‚
        â”œâ”€â”€â–º Search modal opens
        â”‚     â””â”€â–º Focus on input
        â”‚
        â”œâ”€â”€â–º User types query
        â”‚     â””â”€â–º Debounce 500ms
        â”‚
        â”œâ”€â”€â–º AJAX request to /api/search
        â”‚     â”œâ”€â–º Show loading spinner
        â”‚     â””â”€â–º Backend processes
        â”‚
        â”œâ”€â”€â–º Receive JSON response
        â”‚     â””â”€â–º Hide loading spinner
        â”‚
        â”œâ”€â”€â–º Display results
        â”‚     â”œâ”€â–º Create result items
        â”‚     â”œâ”€â–º Highlight search terms
        â”‚     â””â”€â–º Show position indicators
        â”‚
        â””â”€â”€â–º User interacts:
              â”œâ”€â–º Arrow keys: Navigate results
              â”œâ”€â–º Enter: Open selected page
              â”œâ”€â–º Click: Open page
              â””â”€â–º ESC: Close modal
```

## Data Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     SEARCH DATA FLOW                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Input:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User Queryâ”‚â”€â”€â–º "AI Services"
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Processing:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. SearchController receives query                         â”‚
â”‚    â†“                                                         â”‚
â”‚ 2. Loop through 14 searchable pages                        â”‚
â”‚    â†“                                                         â”‚
â”‚ 3. For each page:                                           â”‚
â”‚    â”œâ”€â–º Render view (Blade template)                        â”‚
â”‚    â”œâ”€â–º Strip HTML tags                                     â”‚
â”‚    â”œâ”€â–º Search for "ai services" (case-insensitive)        â”‚
â”‚    â”œâ”€â–º Extract snippets (Â±200 chars)                       â”‚
â”‚    â”œâ”€â–º Highlight matched terms: <mark>AI Services</mark>  â”‚
â”‚    â”œâ”€â–º Calculate position: (pos/total) * 100 = 35.5%      â”‚
â”‚    â””â”€â–º Calculate relevance score                           â”‚
â”‚         â”œâ”€â–º Base: 10 points per occurrence                 â”‚
â”‚         â”œâ”€â–º Bonus: +50 if in page title                    â”‚
â”‚         â””â”€â–º Bonus: +20 for exact match                     â”‚
â”‚    â†“                                                         â”‚
â”‚ 4. Sort results by relevance score (DESC)                  â”‚
â”‚    â†“                                                         â”‚
â”‚ 5. Limit to 20 results                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Output:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ JSON Response:                                              â”‚
â”‚ {                                                           â”‚
â”‚   "success": true,                                          â”‚
â”‚   "query": "AI Services",                                   â”‚
â”‚   "total_results": 8,                                       â”‚
â”‚   "results": [                                              â”‚
â”‚     {                                                       â”‚
â”‚       "page_name": "Services",                              â”‚
â”‚       "page_url": "https://armely.com/services",           â”‚
â”‚       "snippet": "...our <mark>AI Services</mark>...",     â”‚
â”‚       "position": "35.5%",                                  â”‚
â”‚       "relevance": 80                                       â”‚
â”‚     },                                                      â”‚
â”‚     ...                                                     â”‚
â”‚   ]                                                         â”‚
â”‚ }                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Display:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Search Result Item:                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚ â”‚ Services                              [Services Badge]  â”‚â”‚
â”‚ â”‚                                                          â”‚â”‚
â”‚ â”‚ ...our AI Services include consulting, advisory...      â”‚â”‚
â”‚ â”‚                                                          â”‚â”‚
â”‚ â”‚ ğŸ“ Position: 35.5% through page    View Page â†’         â”‚â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## File Dependencies

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   DEPENDENCY GRAPH                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

public.blade.php
â”œâ”€â”€ head
â”‚   â”œâ”€â”€ bootstrap.min.css
â”‚   â”œâ”€â”€ style7.css
â”‚   â”œâ”€â”€ custome.css
â”‚   â”œâ”€â”€ font-awesome.min.css
â”‚   â”œâ”€â”€ icofont.css
â”‚   â””â”€â”€ search-enhanced.css â˜…
â”œâ”€â”€ body
â”‚   â”œâ”€â”€ @include('partials.search-modal') â˜…
â”‚   â”œâ”€â”€ @include('partials.bot-interface') â˜…
â”‚   â””â”€â”€ @include('partials.cookies-consent') â˜…
â””â”€â”€ footer
    â””â”€â”€ @include('partials.footer')
        â”œâ”€â”€ jquery.min.js (v3.6.4)
        â”œâ”€â”€ bootstrap.bundle.js (v4.5.2)
        â”œâ”€â”€ main.js
        â”œâ”€â”€ more-options10-v2.js
        â””â”€â”€ search-enhanced.js â˜…

search-enhanced.js depends on:
â”œâ”€â”€ jQuery (3.6.4+)
â””â”€â”€ DOM ready

search-enhanced.css depends on:
â”œâ”€â”€ Font Awesome (6.6.0+)
â””â”€â”€ CSS custom properties

SearchController.php depends on:
â”œâ”€â”€ Illuminate\Http\Request
â”œâ”€â”€ Illuminate\Support\Facades\Route
â””â”€â”€ Illuminate\Support\Facades\View

â˜… = New files/includes
```

## State Management

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              LOCAL STORAGE STRUCTURE                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

localStorage.armely_chat_dismissed
â”œâ”€â”€ Type: timestamp (number)
â”œâ”€â”€ Purpose: Track when user dismissed bot popup
â”œâ”€â”€ Expiry: 24 hours
â””â”€â”€ Value: Date.now() (milliseconds)

localStorage.armely_cookies_accepted
â”œâ”€â”€ Type: string or JSON
â”œâ”€â”€ Purpose: Store cookie preferences
â”œâ”€â”€ Options:
â”‚   â”œâ”€â”€ "all" (string) - All cookies accepted
â”‚   â””â”€â”€ JSON object with granular settings:
â”‚       {
â”‚         "essential": true,
â”‚         "performance": false,
â”‚         "functionality": true,
â”‚         "targeting": false,
â”‚         "analytics": true
â”‚       }
â””â”€â”€ Expiry: Never (until user clears browser data)

localStorage.armely_banner_closed
â”œâ”€â”€ Type: boolean (string "true")
â”œâ”€â”€ Purpose: Track if announcement banner was closed
â”œâ”€â”€ Expiry: Never
â””â”€â”€ Value: "true"

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              SESSION STORAGE (Future Use)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

sessionStorage.armely_search_history
â”œâ”€â”€ Type: JSON array
â”œâ”€â”€ Purpose: Recent searches (not yet implemented)
â””â”€â”€ Example: ["AI Services", "Contact", "Blog"]

sessionStorage.armely_search_filters
â”œâ”€â”€ Type: JSON object
â”œâ”€â”€ Purpose: Active filters (not yet implemented)
â””â”€â”€ Example: {"pages": ["services", "blog"]}
```

## API Endpoints

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    API DOCUMENTATION                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

GET /api/search
â”œâ”€â”€ Description: Main search endpoint
â”œâ”€â”€ Parameters:
â”‚   â”œâ”€â”€ query (required, string, min:2)
â”‚   â”‚   â””â”€â”€ The search term
â”‚   â””â”€â”€ max_results (optional, integer, default:20)
â”‚       â””â”€â”€ Maximum number of results to return
â”œâ”€â”€ Response: JSON
â”‚   â”œâ”€â”€ success (boolean)
â”‚   â”œâ”€â”€ query (string) - The search term
â”‚   â”œâ”€â”€ total_results (integer)
â”‚   â””â”€â”€ results (array)
â”‚       â””â”€â”€ [
â”‚            {
â”‚              "page_name": "Services",
â”‚              "page_url": "https://...",
â”‚              "snippet": "...<mark>term</mark>...",
â”‚              "position": "35.5%",
â”‚              "relevance": 80
â”‚            }
â”‚          ]
â”œâ”€â”€ Error Response:
â”‚   â””â”€â”€ {"success": false, "message": "Error...", "results": []}
â””â”€â”€ Rate Limit: None (add if needed)

GET /api/search/suggestions
â”œâ”€â”€ Description: Get search suggestions
â”œâ”€â”€ Parameters:
â”‚   â””â”€â”€ query (required, string, min:2)
â”œâ”€â”€ Response: JSON
â”‚   â””â”€â”€ {"suggestions": ["AI Services", "AI Consulting", ...]}
â””â”€â”€ Rate Limit: None (add if needed)
```

## Event Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      EVENT TIMELINE                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

t=0ms     Page load starts
t=100ms   DOM content loaded
t=200ms   JavaScript executed
          â”œâ”€â”€ Search.init()
          â”œâ”€â”€ ChatBot.init()
          â”œâ”€â”€ Cookies.init()
          â””â”€â”€ LazyLoad.init()
t=300ms   CSS fully loaded
t=500ms   Images start lazy loading
t=2000ms  Cookies snackbar appears (if not accepted)
t=5000ms  Bot popup appears (if not dismissed in last 24h)
t=âˆ       User interactions:
          â”œâ”€â”€ Search: Debounced 500ms
          â”œâ”€â”€ Bot: Instant
          â””â”€â”€ Cookies: Instant
```

---

This architecture ensures:
- âœ… Separation of concerns
- âœ… Reusable components
- âœ… Maintainable code structure
- âœ… Scalable search system
- âœ… Efficient state management
- âœ… Clear data flow
- âœ… Easy debugging
